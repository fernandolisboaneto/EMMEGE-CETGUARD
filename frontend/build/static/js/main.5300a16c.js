/*! For license information please see main.5300a16c.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function i(e){var t="https://4467813a-53fb-447d-a535-d1c3afcb1b4e.preview.emergentagent.com","/api"),Rt=(0,a.createContext)(),Dt=e=>{let{children:t}=e;const[n,r]=(0,a.useState)(null),[l,i]=(0,a.useState)(localStorage.getItem("token")),[o,s]=(0,a.useState)(!0);(0,a.useEffect)((()=>{const e=localStorage.getItem("user");e&&l&&(r(JSON.parse(e)),Lt.defaults.headers.common.Authorization="Bearer ".concat(l)),s(!1)}),[l]);return(0,At.jsx)(Rt.Provider,{value:{user:n,token:l,login:async(e,t)=>{try{const n=await Lt.post("".concat(zt,"/auth/login"),{username:e,password:t}),{access_token:a,user:l}=n.data;return i(a),r(l),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(l)),Lt.defaults.headers.common.Authorization="Bearer ".concat(a),{success:!0}}catch(l){var n,a;return console.error("Login error:",l),{success:!1,error:(null===(n=l.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||"Login failed"}}},logout:()=>{i(null),r(null),localStorage.removeItem("token"),localStorage.removeItem("user"),delete Lt.defaults.headers.common.Authorization},loading:o},children:t})},Ft=()=>{const e=(0,a.useContext)(Rt);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Mt=()=>{const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[o,s]=(0,a.useState)(!1),{login:u}=Ft();return(0,At.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,At.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md",children:[(0,At.jsxs)("div",{className:"text-center mb-8",children:[(0,At.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-3 rounded-lg inline-block mb-4",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CertGuard AI"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Sistema Avan\xe7ado de Gerenciamento de Certificados"})]}),l&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:l}),(0,At.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(!0),i("");const r=await u(e,n);r.success||i(r.error),s(!1)},className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usu\xe1rio"}),(0,At.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite seu usu\xe1rio"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,At.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite sua senha"})]}),(0,At.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-4 rounded-md hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Entrando...":"Entrar"})]}),(0,At.jsx)("div",{className:"mt-6 text-center",children:(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:["Credenciais padr\xe3o: ",(0,At.jsx)("br",{}),(0,At.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"superadmin / CertGuard@2025!"})]})})]})})},Ut=()=>{const{user:e,logout:t}=Ft();return(0,At.jsx)("header",{className:"bg-white shadow-lg",children:(0,At.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-3 rounded-lg",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CertGuard AI"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Sistema Avan\xe7ado de Gerenciamento de Certificados"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Bem-vindo,"}),(0,At.jsx)("p",{className:"font-semibold text-gray-900",children:null===e||void 0===e?void 0:e.full_name}),(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"super_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(null===e||void 0===e?void 0:e.role)),children:(e=>{switch(e){case"super_admin":return"Super Admin";case"admin":return"Admin";case"user":return"Usu\xe1rio";default:return"Desconhecido"}})(null===e||void 0===e?void 0:e.role)})]}),(0,At.jsx)("button",{onClick:t,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Sair"})]})]})})})},It=e=>{let{activeTab:t,setActiveTab:n}=e;const{user:r}=Ft(),a=[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca",roles:["super_admin","admin","user"]},{id:"users",label:"Usu\xe1rios",icon:"\ud83d\udc65",roles:["super_admin","admin"]},{id:"certificates",label:"Certificados",icon:"\ud83d\udd10",roles:["super_admin","admin"]},{id:"sites",label:"Sites/Tribunais",icon:"\ud83c\udfdb\ufe0f",roles:["super_admin","admin"]},{id:"assignments",label:"Atribui\xe7\xf5es",icon:"\ud83d\udd17",roles:["super_admin","admin"]},{id:"security",label:"Seguran\xe7a",icon:"\ud83d\udee1\ufe0f",roles:["super_admin","admin"]},{id:"audit",label:"Auditoria",icon:"\ud83d\udccb",roles:["super_admin","admin"]},{id:"ai-analysis",label:"IA",icon:"\ud83e\udd16",roles:["super_admin","admin"]},{id:"my-access",label:"Meus Acessos",icon:"\ud83d\udd11",roles:["user"]}].filter((e=>e.roles.includes(null===r||void 0===r?void 0:r.role)));return(0,At.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,At.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,At.jsx)("div",{className:"flex space-x-8",children:a.map((e=>(0,At.jsxs)("button",{onClick:()=>n(e.id),className:"py-4 px-2 border-b-2 font-medium text-sm ".concat(t===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,At.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id)))})})})},Bt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)({username:"",email:"",full_name:"",password:"",role:"user"}),{user:u}=Ft(),d=async()=>{try{const e=await Lt.get("".concat(zt,"/users"));t(e.data)}catch(e){console.error("Error fetching users:",e)}finally{r(!1)}};(0,a.useEffect)((()=>{d()}),[]);const f=e=>{switch(e){case"super_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=e=>{switch(e){case"super_admin":return"Super Admin";case"admin":return"Admin";case"user":return"Usu\xe1rio";default:return"Desconhecido"}};return n?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Usu\xe1rios"}),(0,At.jsx)("button",{onClick:()=>i(!l),className:"bg-gradient-to-r from-green-600 to-teal-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity",children:"+ Novo Usu\xe1rio"})]}),l&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Criar Novo Usu\xe1rio"}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(zt,"/users"),o),s({username:"",email:"",full_name:"",password:"",role:"user"}),i(!1),d()}catch(t){console.error("Error creating user:",t)}},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome de Usu\xe1rio"}),(0,At.jsx)("input",{type:"text",value:o.username,onChange:e=>s(c(c({},o),{},{username:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,At.jsx)("input",{type:"email",value:o.email,onChange:e=>s(c(c({},o),{},{email:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),(0,At.jsx)("input",{type:"text",value:o.full_name,onChange:e=>s(c(c({},o),{},{full_name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),(0,At.jsx)("input",{type:"password",value:o.password,onChange:e=>s(c(c({},o),{},{password:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o"}),(0,At.jsxs)("select",{value:o.role,onChange:e=>s(c(c({},o),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:["super_admin"===(null===u||void 0===u?void 0:u.role)&&(0,At.jsx)("option",{value:"admin",children:"Admin"}),(0,At.jsx)("option",{value:"user",children:"Usu\xe1rio"})]})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2",children:"Criar Usu\xe1rio"}),(0,At.jsx)("button",{type:"button",onClick:()=>i(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancelar"})]})]})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usu\xe1rio"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fun\xe7\xe3o"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xdaltimo Login"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(f(e.role)),children:p(e.role)})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Ativo":"Inativo"})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleString("pt-BR"):"Nunca"})]},e.id)))})]})})]})},Ht=()=>{var e;const[t,n]=(0,a.useState)({}),[r,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{(async()=>{try{const[e,t]=await Promise.all([Lt.get("".concat(zt,"/dashboard/admin")),Lt.get("".concat(zt,"/security/alerts"))]);n(e.data),l(t.data)}catch(e){console.error("Error fetching dashboard data:",e)}finally{o(!1)}})()}),[]),i?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Dashboard Administrativo"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Total de Usu\xe1rios"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:t.total_users||0})]}),(0,At.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})})})]})}),(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Certificados Ativos"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-green-600",children:t.active_certificates||0})]}),(0,At.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Total de Certificados"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:t.total_certificates||0})]}),(0,At.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})}),(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Alertas de Seguran\xe7a"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-red-600",children:t.unresolved_alerts||0})]}),(0,At.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 15c-.77.833.192 2.5 1.732 2.5z"})})})]})})]}),r.length>0&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:"\u26a0\ufe0f Alertas de Seguran\xe7a"}),(0,At.jsx)("div",{className:"space-y-3",children:r.slice(0,5).map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"font-medium text-red-800",children:e.message}),(0,At.jsxs)("p",{className:"text-sm text-red-600",children:[new Date(e.timestamp).toLocaleString("pt-BR")," - Severidade: ",e.severity]})]}),(0,At.jsx)("button",{className:"text-red-600 hover:text-red-800",children:"Ver Detalhes"})]},e.id)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Atividades Recentes"}),(0,At.jsx)("div",{className:"space-y-3",children:null===(e=t.recent_activities)||void 0===e?void 0:e.slice(0,10).map((e=>{var t;return(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"font-medium text-gray-800",children:e.action_type}),(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:["Usu\xe1rio: ",e.user_id," - ",new Date(e.timestamp).toLocaleString("pt-BR")]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.success?"Sucesso":"Falha"}),(0,At.jsxs)("span",{className:"text-sm text-gray-500",children:["Risco: ",(null===(t=e.risk_score)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]})]},e.id)}))})]})]})},qt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)({name:"",organization:"",password:"",file:null}),[u,d]=(0,a.useState)(!1),f=async()=>{try{const e=await Lt.get("".concat(zt,"/certificates"));t(e.data)}catch(e){console.error("Error fetching certificates:",e)}finally{r(!1)}};(0,a.useEffect)((()=>{f()}),[]);const p=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"expiring_soon":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},m=e=>{switch(e){case"active":return"Ativo";case"expired":return"Expirado";case"expiring_soon":return"Vencendo";default:return"Desconhecido"}};return n?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gerenciamento de Certificados"}),(0,At.jsx)("button",{onClick:()=>i(!l),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity",children:"\ud83d\udcc1 Importar Certificado"})]}),l&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Importar Certificado (.p12/.pfx)"}),(0,At.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.file){d(!0);try{const e=new FileReader;e.onload=async e=>{const t=e.target.result.split(",")[1];await Lt.post("".concat(zt,"/certificates/import"),{name:o.name,organization:o.organization,password:o.password,file_data:t,file_name:o.file.name});s({name:"",organization:"",password:"",file:null}),i(!1),f(),alert("Certificado importado com sucesso!")},e.readAsDataURL(o.file)}catch(r){var t,n;console.error("Error importing certificate:",r),alert("Erro ao importar certificado: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}finally{d(!1)}}},className:"space-y-4",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Certificado"}),(0,At.jsx)("input",{type:"text",value:o.name,onChange:e=>s(c(c({},o),{},{name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Certificado Jo\xe3o Silva"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organiza\xe7\xe3o"}),(0,At.jsx)("input",{type:"text",value:o.organization,onChange:e=>s(c(c({},o),{},{organization:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Escrit\xf3rio de Advocacia XYZ"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha do Certificado"}),(0,At.jsx)("input",{type:"password",value:o.password,onChange:e=>s(c(c({},o),{},{password:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite a senha do certificado"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo do Certificado"}),(0,At.jsx)("input",{type:"file",accept:".p12,.pfx",onChange:e=>{const t=e.target.files[0];t&&s(c(c({},o),{},{file:t}))},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsx)("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\ud83d\udcc1 Importando...":"\ud83d\udcc1 Importar"}),(0,At.jsx)("button",{type:"button",onClick:()=>i(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancelar"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600",children:(0,At.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Certificados Digitais"})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:0===e.length?(0,At.jsxs)("div",{className:"p-8 text-center",children:[(0,At.jsx)("svg",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhum certificado encontrado"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:'Clique em "Importar Certificado" para come\xe7ar'})]}):(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organiza\xe7\xe3o"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validade"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Atribu\xeddo Para"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.common_name})]})}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,At.jsx)("div",{className:"text-sm text-gray-900",children:e.organization}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.department})]}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(p(e.status)),children:m(e.status)})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.valid_to).toLocaleDateString("pt-BR")}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.assigned_to?"Atribu\xeddo":"N\xe3o atribu\xeddo"}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,At.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:"Gerenciar"})})]},e.id)))})]})})]})]})},Vt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[o,s]=(0,a.useState)([]),[u,d]=(0,a.useState)(!0),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)({certificate_id:"",user_id:"",site_ids:[],access_type:"full",expires_at:""}),g=async()=>{try{const[e,n,a,l]=await Promise.all([Lt.get("".concat(zt,"/certificates/assignments")),Lt.get("".concat(zt,"/certificates")),Lt.get("".concat(zt,"/users")),Lt.get("".concat(zt,"/tribunal-sites"))]);t(e.data),r(n.data),i(a.data),s(l.data)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}};return(0,a.useEffect)((()=>{g()}),[]),u?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Atribui\xe7\xf5es de Certificados"}),(0,At.jsx)("button",{onClick:()=>p(!f),className:"bg-gradient-to-r from-green-600 to-teal-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity",children:"\ud83d\udd17 Nova Atribui\xe7\xe3o"})]}),f&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Atribuir Certificado"}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(zt,"/certificates/assign"),{certificate_id:m.certificate_id,user_id:m.user_id,site_ids:m.site_ids,access_type:m.access_type,expires_at:m.expires_at?new Date(m.expires_at).toISOString():null}),h({certificate_id:"",user_id:"",site_ids:[],access_type:"full",expires_at:""}),p(!1),g(),alert("Atribui\xe7\xe3o criada com sucesso!")}catch(r){var t,n;console.error("Error creating assignment:",r),alert("Erro ao criar atribui\xe7\xe3o: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},className:"space-y-4",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certificado"}),(0,At.jsxs)("select",{value:m.certificate_id,onChange:e=>h(c(c({},m),{},{certificate_id:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Selecione um certificado"}),n.filter((e=>!e.assigned_to)).map((e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usu\xe1rio"}),(0,At.jsxs)("select",{value:m.user_id,onChange:e=>h(c(c({},m),{},{user_id:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Selecione um usu\xe1rio"}),l.filter((e=>"user"===e.role)).map((e=>(0,At.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Acesso"}),(0,At.jsxs)("select",{value:m.access_type,onChange:e=>h(c(c({},m),{},{access_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"full",children:"Acesso Completo"}),(0,At.jsx)("option",{value:"read_only",children:"Somente Leitura"}),(0,At.jsx)("option",{value:"restricted",children:"Restrito"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expira em (opcional)"}),(0,At.jsx)("input",{type:"datetime-local",value:m.expires_at,onChange:e=>h(c(c({},m),{},{expires_at:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sites/Tribunais Autorizados"}),(0,At.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2",children:o.map((e=>(0,At.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,At.jsx)("input",{type:"checkbox",checked:m.site_ids.includes(e.id),onChange:()=>(e=>{const t=m.site_ids.includes(e)?m.site_ids.filter((t=>t!==e)):[...m.site_ids,e];h(c(c({},m),{},{site_ids:t}))})(e.id),className:"rounded"}),(0,At.jsx)("span",{className:"text-sm",children:e.abbreviation})]},e.id)))})]}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"\ud83d\udd17 Criar Atribui\xe7\xe3o"}),(0,At.jsx)("button",{type:"button",onClick:()=>p(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancelar"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-green-600 to-teal-600",children:(0,At.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Atribui\xe7\xf5es Ativas"})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:0===e.length?(0,At.jsxs)("div",{className:"p-8 text-center",children:[(0,At.jsx)("svg",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhuma atribui\xe7\xe3o encontrada"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:'Clique em "Nova Atribui\xe7\xe3o" para come\xe7ar'})]}):(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usu\xe1rio"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sites"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acesso"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(((e,t)=>{var n;return(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.certificate.name}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.certificate.organization})]}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.user.full_name}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.user.email})]}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"text-sm text-gray-900",children:[e.sites.length," site(s)"]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:(null===(n=e.sites[0])||void 0===n?void 0:n.access_type)||"full"})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.assigned_at).toLocaleDateString("pt-BR")})]},t)}))})]})})]})]})},Wt=()=>{var e,t,n,r,l;const[i,o]=(0,a.useState)({}),[s,u]=(0,a.useState)(!0),c=async()=>{try{const e=await Lt.get("".concat(zt,"/security/dashboard"));o(e.data)}catch(e){console.error("Error fetching security data:",e)}finally{u(!1)}};(0,a.useEffect)((()=>{c();const e=setInterval(c,3e4);return()=>clearInterval(e)}),[]);const d=e=>{switch(e){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";case"critical":return"text-red-800";default:return"text-gray-600"}};return s?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Painel de Seguran\xe7a"}),(0,At.jsx)("button",{onClick:c,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity",children:"\ud83d\udd04 Atualizar"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Score de Seguran\xe7a"}),(0,At.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[Math.round(100*(i.security_score||0)),"%"]})]}),(0,At.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"N\xedvel de Amea\xe7a"}),(0,At.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat((e=>{switch(e){case"LOW":return"bg-green-100 text-green-800";case"MEDIUM":return"bg-yellow-100 text-yellow-800";case"HIGH":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(i.threat_level)),children:i.threat_level||"LOW"})]}),(0,At.jsx)("div",{className:"bg-orange-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 15c-.77.833.192 2.5 1.732 2.5z"})})})]})}),(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Alertas Ativos"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-red-600",children:(null===(e=i.security_alerts)||void 0===e?void 0:e.length)||0})]}),(0,At.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4 19h2V5H4v14zM10 5v14h4V5h-4z"})})})]})}),(0,At.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Logins Falhados"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:i.failed_logins||0})]}),(0,At.jsx)("div",{className:"bg-yellow-100 p-3 rounded-full",children:(0,At.jsx)("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden mb-8",children:[(0,At.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-red-600 to-pink-600",children:(0,At.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Alertas de Seguran\xe7a"})}),(0,At.jsx)("div",{className:"p-6",children:0===(null===(t=i.security_alerts)||void 0===t?void 0:t.length)?(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)("svg",{className:"h-16 w-16 text-green-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhum alerta de seguran\xe7a"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Sistema operando normalmente"})]}):(0,At.jsx)("div",{className:"space-y-4",children:null===(n=i.security_alerts)||void 0===n?void 0:n.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("span",{className:"inline-block w-3 h-3 rounded-full ".concat(d(e.severity))})}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.alert_type}),(0,At.jsx)("span",{className:"text-xs font-medium ".concat(d(e.severity)),children:e.severity.toUpperCase()})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.timestamp).toLocaleString("pt-BR")})]})]},t)))})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-orange-600 to-red-600",children:(0,At.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Atividades de Alto Risco"})}),(0,At.jsx)("div",{className:"p-6",children:0===(null===(r=i.high_risk_activities)||void 0===r?void 0:r.length)?(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)("svg",{className:"h-16 w-16 text-green-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhuma atividade de alto risco"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Comportamento dos usu\xe1rios normal"})]}):(0,At.jsx)("div",{className:"space-y-4",children:null===(l=i.high_risk_activities)||void 0===l?void 0:l.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-red-50 rounded-lg",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("span",{className:"inline-block w-3 h-3 rounded-full bg-red-600"})}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.action_type}),(0,At.jsxs)("span",{className:"text-xs font-medium text-red-600",children:["Risco: ",Math.round(100*e.risk_score),"%"]})]}),(0,At.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Usu\xe1rio: ",e.user_id]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.timestamp).toLocaleString("pt-BR")})]})]},t)))})})]})]})},$t=()=>{const[e,t]=(0,a.useState)(null),[n,r]=(0,a.useState)(!1),[l,i]=(0,a.useState)("behavior"),[o,s]=(0,a.useState)(24);return(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"An\xe1lise de IA"}),(0,At.jsx)("button",{onClick:async()=>{r(!0);try{const e=await Lt.post("".concat(zt,"/ai/analyze"),{analysis_type:l,time_range:o,context:{requested_by:"admin",timestamp:(new Date).toISOString()}});t(e.data)}catch(a){var e,n;console.error("Error running AI analysis:",a),alert("Erro ao executar an\xe1lise de IA: "+((null===(e=a.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.detail)||a.message))}finally{r(!1)}},disabled:n,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:n?"\ud83e\udd16 Analisando...":"\ud83e\udd16 Executar An\xe1lise"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Configura\xe7\xf5es de An\xe1lise"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de An\xe1lise"}),(0,At.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"behavior",children:"An\xe1lise Comportamental"}),(0,At.jsx)("option",{value:"certificate",children:"An\xe1lise de Certificados"}),(0,At.jsx)("option",{value:"security",children:"An\xe1lise de Seguran\xe7a"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per\xedodo de An\xe1lise (horas)"}),(0,At.jsxs)("select",{value:o,onChange:e=>s(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:1,children:"\xdaltima hora"}),(0,At.jsx)("option",{value:24,children:"\xdaltimas 24 horas"}),(0,At.jsx)("option",{value:168,children:"\xdaltima semana"}),(0,At.jsx)("option",{value:720,children:"\xdaltimo m\xeas"})]})]})]})]}),e&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,At.jsxs)("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-white",children:(e=>{switch(e){case"behavior":return"An\xe1lise Comportamental";case"certificate":return"An\xe1lise de Certificados";case"security":return"An\xe1lise de Seguran\xe7a";default:return"An\xe1lise Desconhecida"}})(e.analysis_type)}),(0,At.jsxs)("p",{className:"text-purple-100 text-sm",children:["Executado em: ",new Date(e.timestamp).toLocaleString("pt-BR")]})]}),(0,At.jsx)("div",{className:"p-6",children:e.result&&(0,At.jsxs)("div",{className:"space-y-6",children:[e.result.risk_level&&(0,At.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"N\xedvel de Risco"}),(0,At.jsx)("span",{className:"text-2xl font-bold ".concat((e=>{switch(e){case"LOW":return"text-green-600";case"MEDIUM":return"text-yellow-600";case"HIGH":return"text-orange-600";case"CRITICAL":return"text-red-600";default:return"text-gray-600"}})(e.result.risk_level)),children:e.result.risk_level})]}),e.result.recommendations&&(0,At.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Recomenda\xe7\xf5es"}),(0,At.jsx)("ul",{className:"space-y-1",children:e.result.recommendations.map(((e,t)=>(0,At.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-blue-600",children:"\u2022"}),(0,At.jsx)("span",{className:"text-sm text-gray-700",children:e})]},t)))})]}),e.result.analysis_summary&&(0,At.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumo da An\xe1lise"}),(0,At.jsx)("p",{className:"text-sm text-gray-700",children:e.result.analysis_summary})]}),(0,At.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Resposta Detalhada da IA"}),(0,At.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap max-h-40 overflow-y-auto",children:JSON.stringify(e.result,null,2)})]})]})})]})]})},Qt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(""),[o,s]=(0,a.useState)([]),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{const n=e?"".concat(zt,"/audit/user/").concat(e):"".concat(zt,"/audit/recent"),r=await Lt.get(n);t(r.data)}catch(n){console.error("Error fetching audit logs:",n)}finally{r(!1)}};(0,a.useEffect)((()=>{(async()=>{try{const e=await Lt.get("".concat(zt,"/users"));s(e.data)}catch(e){console.error("Error fetching users:",e)}})(),u()}),[]);const c=e=>{switch(e){case"login":return"text-green-600";case"logout":default:return"text-gray-600";case"certificate_access":return"text-blue-600";case"site_access":return"text-purple-600"}};return n?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Trilha de Auditoria"}),(0,At.jsx)("button",{onClick:()=>u(l),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity",children:"\ud83d\udd04 Atualizar"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Filtros"}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usu\xe1rio"}),(0,At.jsxs)("select",{value:l,onChange:e=>{return t=e.target.value,i(t),void u(t);var t},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Todos os usu\xe1rios"}),o.map((e=>(0,At.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-indigo-600 to-purple-600",children:(0,At.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Logs de Auditoria"})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:0===e.length?(0,At.jsxs)("div",{className:"p-8 text-center",children:[(0,At.jsx)("svg",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhum log de auditoria encontrado"})]}):(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usu\xe1rio"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xe3o"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detalhes"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risco"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Blockchain"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(((e,t)=>{var n;return(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString("pt-BR")}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.user_id}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"text-sm font-medium ".concat(c(e.action_type)),children:e.action_type})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(n=e.action_details)||void 0===n?void 0:n.action)||"N/A"}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Math.round(100*(e.risk_score||0)),"%"]}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.blockchain_hash?(0,At.jsx)("span",{className:"text-green-600",children:"\u2713"}):(0,At.jsx)("span",{className:"text-gray-400",children:"-"})})]},t)}))})]})})]})]})},Kt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)("all"),o=async()=>{try{const e=await Lt.get("".concat(zt,"/tribunal-sites"));t(e.data)}catch(e){console.error("Error fetching sites:",e)}finally{r(!1)}};(0,a.useEffect)((()=>{o()}),[]);const s="all"===l?e:e.filter((e=>e.category===l)),u=e=>{switch(e){case"Superior":return"bg-purple-100 text-purple-800";case"Regional Federal":return"bg-blue-100 text-blue-800";case"Estadual":return"bg-green-100 text-green-800";case"Trabalhista":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return n?(0,At.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Sites e Tribunais"}),0===e.length&&(0,At.jsx)("button",{onClick:async()=>{try{await Lt.post("".concat(zt,"/init/tribunal-sites")),o()}catch(e){console.error("Error initializing sites:",e)}},className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity",children:"Inicializar Sites"})]}),(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsxs)("div",{className:"flex space-x-2 overflow-x-auto",children:[(0,At.jsxs)("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-lg whitespace-nowrap ".concat("all"===l?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Todos (",e.length,")"]}),["Superior","Regional Federal","Estadual","Trabalhista"].map((t=>{const n=e.filter((e=>e.category===t)).length;return(0,At.jsxs)("button",{onClick:()=>i(t),className:"px-4 py-2 rounded-lg whitespace-nowrap ".concat(l===t?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[t," (",n,")"]},t)}))]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tribunal"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.abbreviation})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(u(e.category)),children:e.category})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.state||"-"}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:e.url})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Ativo":"Inativo"})})]},e.id)))})]})})]})},Gt=()=>{const[e,t]=(0,a.useState)("dashboard"),{user:n}=Ft();return(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,At.jsx)(Ut,{}),(0,At.jsx)(It,{activeTab:e,setActiveTab:t}),(0,At.jsx)("main",{children:(()=>{switch(e){case"dashboard":default:return(0,At.jsx)(Ht,{});case"users":return(0,At.jsx)(Bt,{});case"sites":return(0,At.jsx)(Kt,{});case"certificates":return(0,At.jsx)(qt,{});case"assignments":return(0,At.jsx)(Vt,{});case"security":return(0,At.jsx)(Wt,{});case"audit":return(0,At.jsx)(Qt,{});case"ai-analysis":return(0,At.jsx)($t,{});case"my-access":return(0,At.jsx)("div",{className:"p-8 text-center",children:"Meus Acessos - Em desenvolvimento"})}})()})]})};const Xt=()=>{const{user:e,loading:t}=Ft();return t?(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,At.jsx)(Gt,{}):(0,At.jsx)(Mt,{})},Yt=function(){return(0,At.jsx)(Dt,{children:(0,At.jsx)("div",{className:"App",children:(0,At.jsx)(Xt,{})})})};l.createRoot(document.getElementById("root")).render((0,At.jsx)(a.StrictMode,{children:(0,At.jsx)(Yt,{})}))})();
//# sourceMappingURL=main.5300a16c.js.map